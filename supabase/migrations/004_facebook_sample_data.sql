-- DADOS DE EXEMPLO PARA FACEBOOK METRICS
-- Populando com dados realistas de campanhas Facebook

-- Inserir configuração da API do Facebook de exemplo
INSERT INTO public.facebook_api_config (
    user_id,
    app_id,
    app_secret,
    access_token,
    account_id,
    page_id,
    pixel_id,
    is_active,
    last_sync
) VALUES (
    'system',
    '123456789012345',
    'encrypted_app_secret_here',
    'encrypted_access_token_here',
    'act_123456789',
    '987654321',
    'FB_PIXEL_12345',
    true,
    timezone('utc'::text, now()) - interval '1 hour'
);

-- Inserir métricas de campanhas dos últimos 30 dias
INSERT INTO public.facebook_metrics (
    campaign_id,
    campaign_name,
    adset_id,
    adset_name,
    ad_id,
    ad_name,
    date_start,
    date_end,
    impressions,
    reach,
    clicks,
    unique_clicks,
    spend,
    likes,
    comments,
    shares,
    post_engagements,
    cpm,
    cpc,
    ctr,
    conversions,
    conversion_value,
    quiz_starts,
    quiz_completions,
    leads_generated,
    demographics,
    device_breakdown,
    placement_breakdown,
    account_id,
    currency
) VALUES 
-- Campanha 1: Quiz de Personalidade - Performance Alta
(
    'camp_quiz_personalidade_001',
    'Quiz Personalidade - Descubra Seu Estilo',
    'adset_001',
    'Interesse em Moda - 25-45 anos',
    'ad_001',
    'Criativo Quiz Principal',
    CURRENT_DATE - interval '7 days',
    CURRENT_DATE - interval '1 day',
    45800,
    38200,
    1850,
    1720,
    287.50,
    156,
    23,
    45,
    298,
    6.28,
    0.155,
    4.04,
    78,
    3120.00,
    142,
    89,
    67,
    '{"age_groups": {"18-24": 15, "25-34": 35, "35-44": 30, "45-54": 20}, "gender": {"female": 75, "male": 25}}',
    '{"desktop": 25, "mobile": 70, "tablet": 5}',
    '{"facebook_feeds": 60, "instagram_feed": 25, "stories": 10, "right_column": 5}',
    'act_123456789',
    'BRL'
),
-- Campanha 2: Lead Magnet Fashion - Performance Média
(
    'camp_leadmagnet_fashion_002',
    'Lead Magnet - Guia de Estilo Grátis',
    'adset_002',
    'Lookalike - Compradores Moda',
    'ad_002',
    'Criativo Download Grátis',
    CURRENT_DATE - interval '14 days',
    CURRENT_DATE - interval '8 days',
    32500,
    27800,
    1120,
    980,
    198.75,
    89,
    12,
    28,
    156,
    6.12,
    0.177,
    3.45,
    45,
    1575.00,
    89,
    52,
    38,
    '{"age_groups": {"25-34": 40, "35-44": 35, "45-54": 25}, "gender": {"female": 82, "male": 18}}',
    '{"desktop": 30, "mobile": 65, "tablet": 5}',
    '{"facebook_feeds": 55, "instagram_feed": 30, "stories": 12, "right_column": 3}',
    'act_123456789',
    'BRL'
),
-- Campanha 3: Webinar Signup - Performance Baixa (precisa otimização)
(
    'camp_webinar_tech_003',
    'Webinar Tech Trends 2025',
    'adset_003',
    'Interesse em Tecnologia',
    'ad_003',
    'Criativo Webinar',
    CURRENT_DATE - interval '21 days',
    CURRENT_DATE - interval '15 days',
    28900,
    22400,
    650,
    580,
    165.00,
    34,
    8,
    12,
    78,
    5.71,
    0.254,
    2.25,
    23,
    1150.00,
    56,
    28,
    19,
    '{"age_groups": {"25-34": 45, "35-44": 30, "45-54": 25}, "gender": {"female": 45, "male": 55}}',
    '{"desktop": 45, "mobile": 50, "tablet": 5}',
    '{"facebook_feeds": 70, "instagram_feed": 20, "stories": 8, "right_column": 2}',
    'act_123456789',
    'BRL'
),
-- Campanha 4: Retargeting Quiz Abandonado - Performance Excelente
(
    'camp_retargeting_abandoned_004',
    'Retargeting - Complete Seu Quiz',
    'adset_004',
    'Usuários que Abandonaram Quiz',
    'ad_004',
    'Criativo Incentivo Conclusão',
    CURRENT_DATE - interval '5 days',
    CURRENT_DATE,
    12300,
    10800,
    890,
    820,
    89.50,
    67,
    15,
    22,
    134,
    7.28,
    0.101,
    7.24,
    56,
    2240.00,
    78,
    67,
    45,
    '{"age_groups": {"25-34": 38, "35-44": 32, "45-54": 30}, "gender": {"female": 68, "male": 32}}',
    '{"desktop": 20, "mobile": 75, "tablet": 5}',
    '{"facebook_feeds": 45, "instagram_feed": 35, "stories": 15, "right_column": 5}',
    'act_123456789',
    'BRL'
),
-- Campanha 5: Teste A/B - Criativo vs Video
(
    'camp_ab_test_creative_005',
    'A/B Test - Imagem vs Vídeo',
    'adset_005',
    'Público Amplo - Moda',
    'ad_005',
    'Criativo Vídeo Animado',
    CURRENT_DATE - interval '3 days',
    CURRENT_DATE - interval '1 day',
    18500,
    15200,
    720,
    680,
    112.80,
    98,
    28,
    35,
    189,
    6.10,
    0.157,
    3.89,
    34,
    1360.00,
    67,
    41,
    32,
    '{"age_groups": {"18-24": 25, "25-34": 40, "35-44": 25, "45-54": 10}, "gender": {"female": 78, "male": 22}}',
    '{"desktop": 22, "mobile": 72, "tablet": 6}',
    '{"facebook_feeds": 50, "instagram_feed": 30, "stories": 18, "right_column": 2}',
    'act_123456789',
    'BRL'
);

-- Inserir logs de sincronização
INSERT INTO public.facebook_sync_logs (
    config_id,
    sync_type,
    status,
    records_synced,
    records_updated,
    records_failed,
    date_range_start,
    date_range_end,
    started_at,
    completed_at,
    duration_seconds,
    triggered_by
) VALUES 
(
    (SELECT id FROM public.facebook_api_config LIMIT 1),
    'automatic',
    'success',
    5,
    2,
    0,
    CURRENT_DATE - interval '30 days',
    CURRENT_DATE,
    timezone('utc'::text, now()) - interval '2 hours',
    timezone('utc'::text, now()) - interval '1 hour 45 minutes',
    900,
    'system'
),
(
    (SELECT id FROM public.facebook_api_config LIMIT 1),
    'manual',
    'success',
    3,
    0,
    0,
    CURRENT_DATE - interval '7 days',
    CURRENT_DATE,
    timezone('utc'::text, now()) - interval '30 minutes',
    timezone('utc'::text, now()) - interval '25 minutes',
    300,
    'admin_user'
);

-- Comentário final
SELECT 'Facebook metrics sample data populated successfully! Now you can track Facebook campaign performance.' AS status;