<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ” DEBUG - Painel de Propriedades</title>
    <style>
      body {
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
      }
      .debug-container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .status-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      .status-card {
        padding: 15px;
        border-radius: 6px;
        border: 1px solid #ddd;
      }
      .status-success {
        background: #f0fdf4;
        border-color: #22c55e;
      }
      .status-error {
        background: #fef2f2;
        border-color: #ef4444;
      }
      .status-warning {
        background: #fffbeb;
        border-color: #f59e0b;
      }
      .test-section {
        margin: 20px 0;
        padding: 20px;
        border: 1px solid #b89b7a;
        border-radius: 8px;
        background: #B89B7A/5;
      }
      .test-button {
        background: #b89b7a;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }
      .test-button:hover {
        background: #a68a6e;
      }
      .log-output {
        background: #1a1a1a;
        color: #00ff00;
        padding: 15px;
        border-radius: 4px;
        font-family: monospace;
        white-space: pre-wrap;
        max-height: 300px;
        overflow-y: auto;
        margin-top: 10px;
      }
      .error-log {
        color: #ff4444;
      }
      .warning-log {
        color: #ffaa00;
      }
      .success-log {
        color: #00ff00;
      }
    </style>
  </head>
  <body>
    <div class="debug-container">
      <h1>ğŸ” DEBUG - Painel de Propriedades Quiz Quest</h1>

      <div class="status-grid">
        <div class="status-card status-success">
          <h3>âœ… Servidor</h3>
          <p>Status: <span id="server-status">Verificando...</span></p>
          <p>
            URL:
            <a href="http://localhost:8081/editor" target="_blank">http://localhost:8081/editor</a>
          </p>
        </div>

        <div class="status-card" id="components-status">
          <h3>ğŸ›ï¸ Componentes</h3>
          <p>UniversalPropertiesPanel: <span id="panel-status">Verificando...</span></p>
          <p>useUnifiedProperties: <span id="hook-status">Verificando...</span></p>
        </div>

        <div class="status-card" id="integration-status">
          <h3>ğŸ”— IntegraÃ§Ã£o</h3>
          <p>Editor: <span id="editor-status">Verificando...</span></p>
          <p>Props: <span id="props-status">Verificando...</span></p>
        </div>
      </div>

      <div class="test-section">
        <h2>ğŸ§ª Testes Interativos</h2>
        <p>Use estes botÃµes para testar a funcionalidade do painel:</p>

        <button class="test-button" onclick="testServerConnection()">ğŸŒ Testar Servidor</button>

        <button class="test-button" onclick="openEditorInNewTab()">ğŸ“ Abrir Editor</button>

        <button class="test-button" onclick="checkConsoleErrors()">ğŸ” Verificar Console</button>

        <button class="test-button" onclick="testPanelFunctionality()">ğŸ›ï¸ Testar Painel</button>

        <div class="log-output" id="debug-log">
          ğŸ“‹ LOG DE DEBUG: =============== Aguardando testes...
        </div>
      </div>

      <div class="test-section">
        <h2>ğŸ“‹ InstruÃ§Ãµes de Teste Manual</h2>
        <ol>
          <li>
            <strong>Abrir Editor:</strong> Clique em "ğŸ“ Abrir Editor" ou vÃ¡ para
            <a href="http://localhost:8081/editor" target="_blank">http://localhost:8081/editor</a>
          </li>
          <li><strong>Abrir DevTools:</strong> Pressione F12 no navegador</li>
          <li>
            <strong>Adicionar Componente:</strong> No painel esquerdo, clique em "Texto" ou "BotÃ£o"
          </li>
          <li>
            <strong>Selecionar Componente:</strong> Clique no componente adicionado na Ã¡rea central
          </li>
          <li>
            <strong>Verificar Painel:</strong> Deve aparecer um painel Ã  direita com abas de
            propriedades
          </li>
        </ol>
      </div>

      <div class="test-section">
        <h2>ğŸ¯ Checklist de Funcionalidade</h2>
        <div id="functionality-checklist">
          <div>â³ Componente fica selecionado (borda marrom)</div>
          <div>â³ Painel aparece Ã  direita</div>
          <div>â³ Abas de propriedades visÃ­veis (ConteÃºdo, Estilo, Layout, AvanÃ§ado)</div>
          <div>â³ Campos de propriedades aparecem</div>
          <div>â³ Propriedades sÃ£o editÃ¡veis</div>
          <div>â³ MudanÃ§as aplicam ao componente</div>
          <div>â³ BotÃ£o deletar funciona</div>
          <div>â³ Nenhum erro no console</div>
        </div>
      </div>
    </div>

    <script>
      let debugLog = document.getElementById("debug-log");

      function log(message, type = "info") {
        const timestamp = new Date().toLocaleTimeString();
        const className =
          type === "error"
            ? "error-log"
            : type === "warning"
              ? "warning-log"
              : type === "success"
                ? "success-log"
                : "";

        debugLog.innerHTML += `\n[${timestamp}] ${message}`;
        if (className) {
          const lines = debugLog.innerHTML.split("\n");
          lines[lines.length - 1] = `<span class="${className}">${lines[lines.length - 1]}</span>`;
          debugLog.innerHTML = lines.join("\n");
        }
        debugLog.scrollTop = debugLog.scrollHeight;
      }

      function testServerConnection() {
        log("ğŸŒ Testando conexÃ£o com servidor...", "info");

        fetch("http://localhost:8081")
          .then(response => {
            if (response.ok) {
              log("âœ… Servidor respondendo normalmente", "success");
              document.getElementById("server-status").textContent = "Online âœ…";
            } else {
              log(`âŒ Servidor retornou status ${response.status}`, "error");
              document.getElementById("server-status").textContent = "Erro âŒ";
            }
          })
          .catch(error => {
            log(`âŒ Erro de conexÃ£o: ${error.message}`, "error");
            document.getElementById("server-status").textContent = "Offline âŒ";
          });
      }

      function openEditorInNewTab() {
        log("ğŸ“ Abrindo editor em nova aba...", "info");
        window.open("http://localhost:8081/editor", "_blank");
        log("âœ… Editor aberto (verifique a nova aba)", "success");
      }

      function checkConsoleErrors() {
        log("ğŸ” Verificando erros no console...", "info");

        // Capturar erros do console
        const originalError = console.error;
        const originalWarn = console.warn;

        let errorCount = 0;
        let warnCount = 0;

        console.error = function (...args) {
          errorCount++;
          log(`âŒ CONSOLE ERROR: ${args.join(" ")}`, "error");
          originalError.apply(console, args);
        };

        console.warn = function (...args) {
          warnCount++;
          log(`âš ï¸ CONSOLE WARNING: ${args.join(" ")}`, "warning");
          originalWarn.apply(console, args);
        };

        setTimeout(() => {
          if (errorCount === 0 && warnCount === 0) {
            log("âœ… Nenhum erro ou warning detectado", "success");
          } else {
            log(`ğŸ“Š Detectados ${errorCount} erros e ${warnCount} warnings`, "warning");
          }
        }, 2000);
      }

      function testPanelFunctionality() {
        log("ğŸ›ï¸ Teste de funcionalidade do painel iniciado...", "info");
        log("ğŸ“‹ Para testar completamente:", "info");
        log('1. Abra o editor (botÃ£o "ğŸ“ Abrir Editor")', "info");
        log("2. Adicione um componente (ex: Texto)", "info");
        log("3. Clique no componente para selecionÃ¡-lo", "info");
        log("4. Verifique se o painel aparece Ã  direita", "info");
        log("5. Teste editar propriedades nas abas", "info");
        log("ğŸ¯ Resulte aqui os testes manuais!", "info");
      }

      // VerificaÃ§Ã£o automÃ¡tica inicial
      window.onload = function () {
        log("ğŸš€ Debug do Painel de Propriedades iniciado", "success");
        log("ğŸ“‹ Sistema Quiz Quest - VerificaÃ§Ã£o de funcionalidade", "info");

        // Testar servidor automaticamente
        setTimeout(testServerConnection, 1000);

        // Verificar console
        setTimeout(checkConsoleErrors, 2000);
      };
    </script>
  </body>
</html>
