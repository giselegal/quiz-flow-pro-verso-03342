<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debug - Componentes das Etapas</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
        margin: 20px;
        background: #f8fafc;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }
      .step-card {
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        margin-bottom: 16px;
        overflow: hidden;
      }
      .step-header {
        background: #f1f5f9;
        padding: 12px 16px;
        border-bottom: 1px solid #e2e8f0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .step-title {
        font-weight: 600;
        color: #1e293b;
      }
      .step-status {
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 500;
      }
      .status-ok {
        background: #dcfce7;
        color: #166534;
      }
      .status-warning {
        background: #fef3c7;
        color: #92400e;
      }
      .status-error {
        background: #fee2e2;
        color: #991b1b;
      }
      .step-content {
        padding: 16px;
      }
      .block-list {
        display: grid;
        gap: 8px;
      }
      .block-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        background: #f8fafc;
      }
      .block-indicator {
        width: 8px;
        height: 8px;
        border-radius: 50%;
      }
      .indicator-ok {
        background: #10b981;
      }
      .indicator-warning {
        background: #f59e0b;
      }
      .indicator-error {
        background: #ef4444;
      }
      .block-type {
        font-family: "Monaco", "Menlo", monospace;
        font-size: 13px;
        background: #e2e8f0;
        padding: 2px 6px;
        border-radius: 4px;
      }
      .summary {
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 24px;
      }
      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
      }
      .summary-item {
        text-align: center;
      }
      .summary-number {
        font-size: 24px;
        font-weight: 700;
        color: #1e293b;
      }
      .summary-label {
        font-size: 12px;
        color: #64748b;
        text-transform: uppercase;
        font-weight: 500;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üîç Debug - An√°lise de Componentes das Etapas</h1>

      <div class="summary">
        <h2>üìä Resumo Geral</h2>
        <div class="summary-grid">
          <div class="summary-item">
            <div class="summary-number" id="total-steps">21</div>
            <div class="summary-label">Total de Etapas</div>
          </div>
          <div class="summary-item">
            <div class="summary-number" id="total-blocks">-</div>
            <div class="summary-label">Total de Blocos</div>
          </div>
          <div class="summary-item">
            <div class="summary-number" id="renderable-blocks">-</div>
            <div class="summary-label">Blocos Renderiz√°veis</div>
          </div>
          <div class="summary-item">
            <div class="summary-number" id="success-rate">-</div>
            <div class="summary-label">Taxa de Sucesso</div>
          </div>
        </div>
      </div>

      <div id="steps-container">
        <!-- Etapas ser√£o inseridas aqui -->
      </div>
    </div>

    <script>
      // Simular verifica√ß√£o dos componentes
      const componentRegistry = {
        // Inline components - verificados como v√°lidos
        "text-inline": true,
        "heading-inline": true,
        "button-inline": true,
        "image-inline": true,
        "image-display-inline": true,
        "spacer-inline": true,
        "divider-inline": true,
        "decorative-bar-inline": true,
        "stat-inline": true,
        "progress-inline": true,
        "countdown-inline": true,
        "pricing-card-inline": true,
        "testimonial-card-inline": true,
        "testimonials-inline": true,
        "style-card-inline": true,
        "result-card-inline": true,
        "result-header-inline": true,
        "step-header-inline": true,
        "secondary-styles-inline": true,
        "style-characteristics-inline": true,
        "characteristics-list-inline": true,
        "quiz-start-page-inline": true,
        "quiz-offer-cta-inline": true,
        "quiz-offer-pricing-inline": true,
        "guarantee-inline": true,
        "before-after-inline": true,
        "bonus-list-inline": true,
        "benefits-inline": true,
        "legal-notice-inline": true,
        "loading-animation": true,
        "badge-inline": true,
        "cta-inline": true,

        // Standard blocks - verificados como v√°lidos
        "quiz-intro-header": true,
        "countdown-timer": true,
        "form-input": true,
        "options-grid": true,
        "stats-metrics": true,
        mentor: true,
        "social-proof": true,
        "basic-text": true,
        "guarantee-block": true,
        "quiz-title": true,
        "strategic-question": true,
      };

      // Dados dos templates das etapas
      const stepTemplates = {
        1: [
          "quiz-intro-header",
          "decorative-bar-inline",
          "text-inline",
          "text-inline",
          "text-inline",
          "spacer-inline",
          "button-inline",
        ],
        2: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        3: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        4: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        5: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        6: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        7: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        8: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        9: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        10: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        11: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        12: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        13: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        14: [
          "quiz-intro-header",
          "heading-inline",
          "text-inline",
          "spacer-inline",
          "options-grid",
          "spacer-inline",
        ],
        15: ["loading-animation", "text-inline", "progress-inline"],
        16: ["loading-animation", "text-inline", "progress-inline"],
        17: [
          "result-header-inline",
          "style-card-inline",
          "style-characteristics-inline",
          "secondary-styles-inline",
        ],
        18: [
          "result-header-inline",
          "style-card-inline",
          "characteristics-list-inline",
          "button-inline",
        ],
        19: ["result-header-inline", "style-card-inline", "benefits-inline", "button-inline"],
        20: ["heading-inline", "text-inline", "form-input", "button-inline"],
        21: [
          "quiz-offer-pricing-inline",
          "before-after-inline",
          "bonus-list-inline",
          "testimonials-inline",
          "guarantee-inline",
          "quiz-offer-cta-inline",
        ],
      };

      const stepNames = {
        1: "Introdu√ß√£o",
        2: "Q1 - Tipo de Roupa",
        3: "Q2 - Personalidade",
        4: "Q3 - Cores Preferidas",
        5: "Q4 - Corpo",
        6: "Q5 - Estilo de Vida",
        7: "Q6 - Ocasi√µes",
        8: "Q7 - Or√ßamento",
        9: "Q8 - Inspira√ß√µes",
        10: "Q9 - Pe√ßas-chave",
        11: "Q10 - Desafios",
        12: "Q11 - Objetivos",
        13: "Q12 - Estilo dos √çdolos",
        14: "Q13 - Confian√ßa",
        15: "Processamento",
        16: "Carregamento",
        17: "Resultado - Estilo Principal",
        18: "Resultado - Caracter√≠sticas",
        19: "Resultado - Benef√≠cios",
        20: "Captura de Lead",
        21: "Oferta Final",
      };

      function analyzeStep(stepNumber) {
        const blocks = stepTemplates[stepNumber] || [];
        const totalBlocks = blocks.length;
        const renderableBlocks = blocks.filter(block => componentRegistry[block]).length;
        const missingBlocks = blocks.filter(block => !componentRegistry[block]);

        const successRate =
          totalBlocks > 0 ? Math.round((renderableBlocks / totalBlocks) * 100) : 0;

        let status = "ok";
        if (successRate < 70) status = "error";
        else if (successRate < 100) status = "warning";

        return {
          stepNumber,
          name: stepNames[stepNumber],
          blocks,
          totalBlocks,
          renderableBlocks,
          missingBlocks,
          successRate,
          status,
        };
      }

      function renderStepCard(analysis) {
        const statusClass =
          analysis.status === "ok"
            ? "status-ok"
            : analysis.status === "warning"
              ? "status-warning"
              : "status-error";

        const blocksHtml = analysis.blocks
          .map(block => {
            const isRenderable = componentRegistry[block];
            const indicatorClass = isRenderable ? "indicator-ok" : "indicator-error";
            const statusText = isRenderable ? "‚úÖ" : "‚ùå";

            return `
                    <div class="block-item">
                        <div class="block-indicator ${indicatorClass}"></div>
                        <span>${statusText}</span>
                        <code class="block-type">${block}</code>
                        ${!isRenderable ? '<span style="color: #ef4444; font-size: 12px;">(componente faltando)</span>' : ""}
                    </div>
                `;
          })
          .join("");

        return `
                <div class="step-card">
                    <div class="step-header">
                        <div class="step-title">Etapa ${analysis.stepNumber}: ${analysis.name}</div>
                        <div class="step-status ${statusClass}">
                            ${analysis.successRate}% (${analysis.renderableBlocks}/${analysis.totalBlocks})
                        </div>
                    </div>
                    <div class="step-content">
                        <div class="block-list">
                            ${blocksHtml}
                        </div>
                    </div>
                </div>
            `;
      }

      function init() {
        const container = document.getElementById("steps-container");
        let totalBlocks = 0;
        let totalRenderableBlocks = 0;

        for (let i = 1; i <= 21; i++) {
          const analysis = analyzeStep(i);
          totalBlocks += analysis.totalBlocks;
          totalRenderableBlocks += analysis.renderableBlocks;

          container.innerHTML += renderStepCard(analysis);
        }

        // Atualizar resumo
        document.getElementById("total-blocks").textContent = totalBlocks;
        document.getElementById("renderable-blocks").textContent = totalRenderableBlocks;
        document.getElementById("success-rate").textContent =
          totalBlocks > 0 ? `${Math.round((totalRenderableBlocks / totalBlocks) * 100)}%` : "0%";
      }

      // Inicializar quando a p√°gina carregar
      document.addEventListener("DOMContentLoaded", init);
    </script>
  </body>
</html>
