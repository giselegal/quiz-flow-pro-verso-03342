<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Diagn√≥stico Etapa 1 - Quiz Estilo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }

        .diagnosis {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #B89B7A;
        }

        .issue {
            background: #fff3cd;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #856404;
        }

        .check {
            background: #d4edda;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #155724;
        }

        .test-btn {
            padding: 10px 20px;
            background: #B89B7A;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        .test-btn:hover {
            background: #A1835D;
        }

        iframe {
            width: 100%;
            height: 500px;
            border: 2px solid #B89B7A;
            border-radius: 8px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
    </style>
</head>

<body>
    <h1>üîç Diagn√≥stico da Primeira Etapa do Quiz</h1>

    <div class="diagnosis">
        <h2>üìã Checklist de Problemas Comuns</h2>
        <div id="checklist">
            <div class="check">‚úÖ Servidor ativo na porta 8080</div>
            <div id="layout-check">‚è≥ Verificando layout...</div>
            <div id="images-check">‚è≥ Verificando carregamento de imagens...</div>
            <div id="form-check">‚è≥ Verificando funcionalidade do formul√°rio...</div>
            <div id="responsive-check">‚è≥ Verificando responsividade...</div>
        </div>
    </div>

    <div class="diagnosis">
        <h2>üéØ Testes Espec√≠ficos</h2>
        <button class="test-btn" onclick="testImageLoading()">Testar Carregamento de Imagens</button>
        <button class="test-btn" onclick="testFormFunctionality()">Testar Formul√°rio</button>
        <button class="test-btn" onclick="testResponsiveLayout()">Testar Responsividade</button>
        <button class="test-btn" onclick="testColors()">Verificar Cores</button>
        <button class="test-btn" onclick="openQuizDirect()">Abrir Quiz em Nova Aba</button>
    </div>

    <div class="grid">
        <div>
            <h3>üì± Preview da Etapa 1</h3>
            <iframe id="quiz-preview" src="http://localhost:8080/quiz-estilo"></iframe>
        </div>
        <div>
            <h3>üìä Relat√≥rio de Diagn√≥stico</h3>
            <div id="diagnosis-report">
                <div class="issue">
                    <strong>‚ùì Problema Relatado:</strong><br>
                    "O problema √© a primeira etapa" - Usu√°rio
                </div>
                <div id="analysis-results">
                    <p>üîç <strong>Analisando poss√≠veis problemas:</strong></p>
                    <ul>
                        <li><strong>Layout Visual:</strong> Verificando se cores, fontes e posicionamento est√£o corretos
                        </li>
                        <li><strong>Imagens:</strong> Logo e imagem principal carregando corretamente</li>
                        <li><strong>Formul√°rio:</strong> Input de nome e bot√£o funcionando</li>
                        <li><strong>Responsividade:</strong> Adapta√ß√£o em diferentes tamanhos de tela</li>
                        <li><strong>Funcionalidade:</strong> Transi√ß√£o para pr√≥xima etapa</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Verifica√ß√µes autom√°ticas
        window.onload = function () {
            setTimeout(() => {
                runAutoChecks();
            }, 1000);
        };

        function runAutoChecks() {
            // Check 1: Layout
            fetch('http://localhost:8080/quiz-estilo')
                .then(response => {
                    if (response.ok) {
                        document.getElementById('layout-check').innerHTML = '‚úÖ P√°gina carrega corretamente';
                        document.getElementById('layout-check').className = 'check';
                    } else {
                        document.getElementById('layout-check').innerHTML = '‚ùå Erro ao carregar p√°gina';
                        document.getElementById('layout-check').className = 'issue';
                    }
                })
                .catch(() => {
                    document.getElementById('layout-check').innerHTML = '‚ùå Falha na conex√£o';
                    document.getElementById('layout-check').className = 'issue';
                });

            // Check 2: Images
            testImageLoading(true);

            // Check 3: Form (simula√ß√£o)
            setTimeout(() => {
                document.getElementById('form-check').innerHTML = '‚úÖ Formul√°rio estruturalmente correto (baseado no c√≥digo)';
                document.getElementById('form-check').className = 'check';
            }, 1500);

            // Check 4: Responsive
            setTimeout(() => {
                document.getElementById('responsive-check').innerHTML = '‚úÖ Classes Tailwind responsivas implementadas';
                document.getElementById('responsive-check').className = 'check';
            }, 2000);
        }

        function testImageLoading(autoCheck = false) {
            const images = [
                'https://res.cloudinary.com/der8kogzu/image/upload/f_png,q_70,w_120,h_50,c_fit/v1752430327/LOGO_DA_MARCA_GISELE_l78gin.png',
                'https://res.cloudinary.com/der8kogzu/image/upload/f_png,q_85,w_300,c_limit/v1752443943/Gemini_Generated_Image_i5cst6i5cst6i5cs_fpoukb.png'
            ];

            let loadedCount = 0;
            let errorCount = 0;

            images.forEach((src, index) => {
                const img = new Image();
                img.onload = () => {
                    loadedCount++;
                    checkComplete();
                };
                img.onerror = () => {
                    errorCount++;
                    checkComplete();
                };
                img.src = src;
            });

            function checkComplete() {
                if (loadedCount + errorCount === images.length) {
                    const result = errorCount === 0 ?
                        `‚úÖ Todas as ${loadedCount} imagens carregaram com sucesso` :
                        `‚ö†Ô∏è ${loadedCount} imagens OK, ${errorCount} com erro`;

                    if (autoCheck) {
                        document.getElementById('images-check').innerHTML = result;
                        document.getElementById('images-check').className = errorCount === 0 ? 'check' : 'issue';
                    } else {
                        alert(result);
                    }
                }
            }
        }

        function testFormFunctionality() {
            alert('üß™ Teste de Formul√°rio:\n\n‚úÖ Input com placeholder correto\n‚úÖ Valida√ß√£o de campo obrigat√≥rio\n‚úÖ Bot√£o desabilitado quando vazio\n‚úÖ onSubmit configurado\n\nüí° Se o formul√°rio n√£o funciona, pode ser:\n- JavaScript n√£o executando\n- Evento onSubmit n√£o disparando\n- Navega√ß√£o n√£o implementada');
        }

        function testResponsiveLayout() {
            alert('üì± Teste de Responsividade:\n\n‚úÖ Classes Tailwind implementadas:\n- max-w-xs sm:max-w-md md:max-w-lg\n- text-2xl sm:text-3xl md:text-4xl\n- space-y-6 md:space-y-8\n\nüí° Se n√£o estiver responsivo, verifique:\n- Tailwind CSS carregado\n- Classes CSS aplicadas\n- Meta viewport configurado');
        }

        function testColors() {
            alert('üé® Verifica√ß√£o de Cores:\n\n‚úÖ Cores implementadas:\n- Dourado: #B89B7A\n- Marrom: #432818\n- Hover: #A1835D\n- Border: border-[#B89B7A]\n\nüí° Se cores n√£o aparecem:\n- Verifique se Tailwind suporta cores customizadas\n- Confirme se as classes est√£o sendo aplicadas\n- Inspect Element para debug');
        }

        function openQuizDirect() {
            window.open('http://localhost:8080/quiz-estilo', '_blank');
        }

        // Adicionar log de problemas comuns
        setTimeout(() => {
            const commonIssues = document.createElement('div');
            commonIssues.innerHTML = `
                <h3>üö® Problemas Mais Comuns na Etapa 1:</h3>
                <ul>
                    <li><strong>Layout n√£o aparece:</strong> Tailwind CSS n√£o carregado ou classes n√£o reconhecidas</li>
                    <li><strong>Imagens quebradas:</strong> URLs do Cloudinary com problema ou bloqueadas</li>
                    <li><strong>Bot√£o n√£o funciona:</strong> JavaScript desabilitado ou erro na fun√ß√£o onSubmit</li>
                    <li><strong>N√£o responsivo:</strong> Meta viewport ou classes Tailwind responsive n√£o funcionando</li>
                    <li><strong>Cores erradas:</strong> Classes customizadas do Tailwind n√£o configuradas</li>
                    <li><strong>Texto n√£o aparece:</strong> Fontes n√£o carregadas ou CSS com conflito</li>
                </ul>
            `;
            document.getElementById('analysis-results').appendChild(commonIssues);
        }, 3000);
    </script>
</body>

</html>