<!DOCTYPE html>
<!DOCTYPE html>

<html lang="pt-BR">
<html lang="pt-BR">

<head>

    <head>

        <meta charset="UTF-8">
        <meta charset="UTF-8">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Teste Editor - quiz21StepsComplete</title>
        <title>Teste Editor 21 Etapas</title>

        <style>
            <style>body {
                body {

                    font-family: Arial, sans-serif;
                    font-family: Arial, sans-serif;

                    max-width: 1200px;
                    max-width: 800px;

                    margin: 20px auto;
                    margin: 0 auto;

                    padding: 20px;
                    padding: 20px;

                    background: #f5f5f5;
                    background-color: #f5f5f5;

                }
            }

            .test-card {
                .test-container {

                    background: white;
                    background: white;

                    border-radius: 8px;
                    padding: 20px;

                    padding: 20px;
                    border-radius: 8px;

                    margin-bottom: 20px;
                    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);

                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                }

            }

            .test-button {

                h1 {
                    background: #007acc;

                    color: #333;
                    color: white;

                }

                border: none;

                .status {
                    padding: 10px 20px;

                    padding: 10px;
                    border-radius: 5px;

                    border-radius: 4px;
                    cursor: pointer;

                    margin: 10px 0;
                    margin: 10px 5px;

                }

                text-decoration: none;

                .success {
                    display: inline-block;

                    background: #d4edda;
                }

                color: #155724;

                .test-button:hover {}

                background: #005a9e;

                .error {}

                background: #f8d7da;

                .status {

                    color: #721c24;
                    padding: 10px;

                }

                margin: 10px 0;

                .warning {
                    border-radius: 5px;

                    background: #fff3cd;
                }

                color: #856404;

                .success {
                    background: #d4edda;
                    color: #155724;
                    border: 1px solid #c3e6cb;
                }

            }

            .warning {
                background: #fff3cd;
                color: #856404;
                border: 1px solid #ffeaa7;
            }

            .btn {
                .error {
                    background: #f8d7da;
                    color: #721c24;
                    border: 1px solid #f5c6cb;
                }

                background: #007bff;

                .info {
                    background: #d1ecf1;
                    color: #0c5460;
                    border: 1px solid #bee5eb;
                }

                color: white;
        </style>

        border: none;
    </head>

    padding: 10px 20px;

<body>

    border-radius: 4px; <div class="test-container">

        cursor: pointer; <h1>ğŸ§ª Teste do Editor - 21 Etapas</h1>

        margin: 5px;

        } <div class="status info">

            .btn:hover { <strong>ğŸ“ Status do Servidor:</strong>

            background: #0056b3; <span id="server-status">Verificando...</span>

            } </div>

        pre {

        background: #f4f4f4; <h2>ğŸ”— Links de Teste</h2>

        padding: 10px; <div>

            border-radius: 4px; <a href="/editor-fixed" class="test-button" target="_blank">

                overflow-x: auto; ğŸ¯ Editor BÃ¡sico

                } </a>

            </style> <a href="/editor-fixed?template=funil-21-etapas" class="test-button" target="_blank">

                </head> ğŸ“‹ Com Template

                <body>
            </a>

            <h1>ğŸ§ª Teste de RenderizaÃ§Ã£o - quiz21StepsComplete</h1> <a
                href="/editor-fixed?funnelId=funnel-1752057778408" class="test-button" target="_blank">

                ğŸ†” Com Funnel ID

                <div class="test-card">
            </a>

            <h2>1. VerificaÃ§Ã£o do JSON</h2> <a href="/editor-fixed?funnelId=test&stage=step-10&preview=true"
                class="test-button" target="_blank">

                <div id="json-status"></div> âš™ï¸ ConfiguraÃ§Ã£o Completa

                <button class="btn" onclick="testJSON()">Testar JSON</button>
            </a>

            <pre id="json-output"></pre>
        </div>

    </div>

    <h2>ğŸ§ª Testes Automatizados</h2>

    <div class="test-card"> <button onclick="testEditorAccess()" class="test-button">

            <h2>2. Abrir Editor</h2> ğŸŒ Testar Acesso

            <p><strong>INSTRUÃ‡Ã•ES:</strong></p>
        </button>

        <ol> <button onclick="testURLParameters()" class="test-button">

                <li>Clique em um dos botÃµes abaixo para abrir o editor</li> ğŸ”— Testar ParÃ¢metros URL

                <li>Abra o Console do navegador (F12 â†’ Console)</li>
            </button>

            <li>Procure por logs iniciando com ğŸ”, ğŸ¯, âœ…</li> <button onclick="runFullTest()" class="test-button">

                <li>Verifique se aparecem "activeTemplateSteps = 21"</li> ğŸš€ Teste Completo

                <li>Verifique se a barra lateral esquerda mostra 21 etapas</li>
            </button>

        </ol>

        <a href="/editor?resource=quiz21StepsComplete" target="_blank" class="btn">
            <div id="test-results">

                â–¶ï¸ Abrir Editor (Nova Aba) <h3>ğŸ“Š Resultados dos Testes</h3>

        </a>
        <div id="results-content">

            <a href="/editor?template=quiz21StepsComplete" target="_blank" class="btn">
                <p>Clique em um botÃ£o de teste para comeÃ§ar...</p>

                â–¶ï¸ Abrir (URL Legacy)
        </div>

        </a>
    </div>

    </div>

    <h2>âœ… Checklist Manual</h2>

    <div class="test-card">
        <div class="checklist">

            <h2>3. Checklist de Testes</h2> <label><input type="checkbox" id="check-page-loads"> PÃ¡gina carrega sem
                erros</label><br>

            <p>Ao abrir o editor, verifique:</p> <label><input type="checkbox" id="check-21-stages"> 21 etapas visÃ­veis
                no painel esquerdo</label><br>

            <ul> <label><input type="checkbox" id="check-stage-click"> Clique em etapa funciona</label><br>

                <li>âœ… O servidor estÃ¡ respondendo (pÃ¡gina carrega)</li> <label><input type="checkbox"
                        id="check-components"> Painel de componentes visÃ­vel</label><br>

                <li>âœ… NÃ£o hÃ¡ erros vermelhos no console</li> <label><input type="checkbox" id="check-canvas">
                    Canvas/Ã¡rea de ediÃ§Ã£o visÃ­vel</label><br>

                <li>âœ… Aparece log:
                    <code>ğŸ¯ [setActiveTemplate] Definindo template ativo: quiz21StepsComplete com 21 etapas</code></li>
                <label><input type="checkbox" id="check-properties"> Painel de propriedades visÃ­vel</label><br>

                <li>âœ… Aparece log: <code>ğŸ” [TemplateService.steps.list] activeTemplateSteps = 21</code></li>
                <label><input type="checkbox" id="check-toolbar"> Toolbar superior visÃ­vel</label><br>

                <li>âœ… A barra lateral esquerda mostra todas as 21 etapas numeradas</li>
        </div>

        <li>âœ… Ã‰ possÃ­vel clicar e navegar entre as etapas</li>

        </ul>
        <div class="status warning" style="margin-top: 20px;">

        </div> <strong>ğŸ’¡ InstruÃ§Ãµes:</strong><br>

        1. Clique nos links de teste acima para abrir o editor<br>

        <script>            2. Verifique se as 21 etapas aparecem no painel esquerdo < br >

                async function testJSON() {
                    3. Teste clicando em diferentes etapas < br >

            const statusDiv = document.getElementById('json-status'); 4. Marque os itens do checklist conforme testa

                    const outputDiv = document.getElementById('json-output');        </div >

                </div >

            try {

                        statusDiv.innerHTML = '<div class="status warning">â³ Carregando...</div>'; <script>

                        // Verificar status do servidor

                            const response = await fetch('/templates/funnels/quiz21StepsComplete/master.v3.json');        fetch('/editor-fixed')

                            .then(response => {

                if (!response.ok) {document.getElementById('server-status').innerHTML = 

                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);                    `<span style="color: green;">âœ… Online (${response.status})</span>`;

                }            })

                            .catch(error => {

                const data = await response.json();                document.getElementById('server-status').innerHTML =

                            `<span style="color: red;">âŒ Offline</span>`;

                const stepsCount = data.steps?.length || 0;            });

                const firstSteps = data.steps?.slice(0, 5).map(s => `  - ${s.id}: ${s.name}`).join('\\n') || '';

                            function updateResults(content) {

                                statusDiv.innerHTML = `            document.getElementById('results-content').innerHTML = content;

                    <div class="status success">        }

                        âœ… JSON carregado com sucesso!<br>

                        <strong>Template:</strong> ${data.name || data.templateId}<br>        function testEditorAccess() {

                        <strong>VersÃ£o:</strong> ${data.templateVersion}<br>            updateResults('<p>ğŸ”„ Testando acesso ao editor...</p>');

                        <strong>Steps:</strong> ${stepsCount}<br>            

                        ${stepsCount === 21 ? 'âœ… ContÃ©m 21 etapas conforme esperado!' : 'âŒ Esperado 21 etapas!'}            fetch('/editor-fixed')

                    </div>                .then(response => {

                `;                    if (response.ok) {

                                updateResults(`

                outputDiv.textContent = `Primeiros 5 steps:\n${firstSteps}\n\n...e mais ${stepsCount - 5} etapas`;                            <div class="status success">

                                âœ… <strong>Editor acessÃ­vel!</strong><br>

            } catch (error) {Status: ${response.status}<br>

                                        statusDiv.innerHTML = `                                Content-Type: ${response.headers.get('content-type')}<br>

                                            <div class="status error">                                <a href="/editor-fixed" target="_blank">ğŸ”— Abrir Editor</a>

                                                âŒ Erro ao carregar JSON:<br>                            </div>

                                            ${error.message}                        `);

                                        </div>                    } else {

                                            `;                        updateResults(`

                outputDiv.textContent = '';                            <div class="status error">

            }                                âŒ <strong>Erro de acesso!</strong><br>

        }                                Status: ${response.status}

                                        </div>

        // Auto-testar JSON ao carregar                        `);

        window.addEventListener('load', () => { }

            console.log('ğŸš€ PÃ¡gina de teste carregada');                })

            console.log('ğŸ“ Acesse http://localhost:8080/test-editor.html');                .catch(error => {

                                            testJSON();                    updateResults(`

        });                        <div class="status error">

        </script> âŒ <strong>Erro de conexÃ£o!</strong><br>

</body> ${error.message}

</html>
</div>

`);
});
}

function testURLParameters() {
updateResults('<p>ğŸ”„ Testando parÃ¢metros URL...</p>');

const testUrls = [
'/editor-fixed',
'/editor-fixed?template=funil-21-etapas',
'/editor-fixed?funnelId=test',
'/editor-fixed?funnelId=test&stage=step-5'
];

let results = '<h4>Teste de URLs:</h4>';
let completedTests = 0;

testUrls.forEach((url, index) => {
fetch(url)
.then(response => {
const status = response.ok ? 'âœ…' : 'âŒ';
results += `<p>${status} ${url} (${response.status})</p>`;
completedTests++;

if (completedTests === testUrls.length) {
updateResults(`<div class="status info">${results}</div>`);
}
})
.catch(error => {
results += `<p>âŒ ${url} (Erro: ${error.message})</p>`;
completedTests++;

if (completedTests === testUrls.length) {
updateResults(`<div class="status warning">${results}</div>`);
}
});
});
}

function runFullTest() {
updateResults('<p>ğŸ”„ Executando teste completo...</p>');

// Abrir editor em nova janela para anÃ¡lise
const editorWindow = window.open('/editor-fixed', 'editor-test');

setTimeout(() => {
updateResults(`
<div class="status info">
    <h4>ğŸš€ Teste Completo Iniciado</h4>
    <p>âœ… Editor aberto em nova janela</p>
    <p>ğŸ” Verifique manualmente:</p>
    <ul>
        <li>21 etapas no painel esquerdo</li>
        <li>4 colunas visÃ­veis</li>
        <li>NavegaÃ§Ã£o entre etapas</li>
        <li>Toolbar superior</li>
    </ul>
    <p><strong>ğŸ’¡ Use F12 para abrir DevTools e verificar erros no console</strong></p>
</div>
`);
}, 1000);
}
</script>
</body>

</html>