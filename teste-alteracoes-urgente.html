<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¥ TESTE URGENTE - Localizar AlteraÃ§Ãµes</title>
    <style>
        body {
            font-family: monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            margin: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #000;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #00ff00;
        }

        .btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn:hover {
            background: #ff6666;
        }

        .status {
            background: #333;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            border-left: 4px solid #00ff00;
        }

        .error {
            border-left-color: #ff4444;
        }

        .success {
            border-left-color: #00ff00;
        }

        .warning {
            border-left-color: #ffaa00;
        }

        #log {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #333;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸš¨ TESTE URGENTE: Localizar Suas AlteraÃ§Ãµes</h1>

        <div class="status">
            <h3>ğŸ¯ OBJETIVO:</h3>
            <p>Encontrar onde estÃ£o as alteraÃ§Ãµes que vocÃª fez:</p>
            <ul>
                <li>ğŸ”¥ Texto "TESTE HOT RELOAD"</li>
                <li>ğŸ¨ Background vermelho (bg-red-500)</li>
                <li>ğŸ›ï¸ Painel de propriedades moderno</li>
            </ul>
        </div>

        <div style="margin: 20px 0;">
            <button class="btn" onclick="abrirEditor()">ğŸ“ Abrir Editor</button>
            <button class="btn" onclick="testarAlteracoes()">ğŸ” Testar AlteraÃ§Ãµes</button>
            <button class="btn" onclick="forcarRefresh()">ğŸ”„ ForÃ§ar Refresh</button>
            <button class="btn" onclick="limparCache()">ğŸ—‘ï¸ Limpar Cache</button>
            <button class="btn" onclick="injetarScript()">ğŸ’‰ Injetar Teste</button>
        </div>

        <div id="log">ğŸ“‹ LOG: Aguardando teste...\n</div>
    </div>

    <script>
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEl = document.getElementById('log');
            const prefix = type === 'error' ? 'âŒ' : type === 'warning' ? 'âš ï¸' : type === 'success' ? 'âœ…' : 'ğŸ“';
            logEl.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            logEl.scrollTop = logEl.scrollHeight;
        }

        function abrirEditor() {
            log('ğŸ“ Abrindo editor...', 'info');
            window.open('http://localhost:5173/editor', '_blank');
        }

        function testarAlteracoes() {
            log('ğŸ” Iniciando teste de alteraÃ§Ãµes...', 'info');

            // Abrir editor e testar
            const editorWindow = window.open('http://localhost:5173/editor', '_blank');

            setTimeout(() => {
                if (editorWindow) {
                    try {
                        // Injetar script no editor
                        const script = editorWindow.document.createElement('script');
                        script.textContent = `
                            console.log('ğŸ”¥ TESTE INJETADO NO EDITOR');
                            
                            setTimeout(() => {
                                // Verificar texto HOT RELOAD
                                const hasHotReload = document.body.textContent.includes('ğŸ”¥ TESTE HOT RELOAD');
                                console.log('ğŸ”¥ HOT RELOAD encontrado:', hasHotReload);
                                
                                // Verificar background vermelho
                                const redBg = document.querySelector('[class*="bg-red"]');
                                console.log('ğŸ¨ Background vermelho:', !!redBg);
                                
                                // Verificar painel de propriedades
                                const panel = document.querySelector('[class*="properties"]');
                                console.log('ğŸ›ï¸ Painel de propriedades:', !!panel);
                                
                                // Tentar encontrar componentes clicÃ¡veis
                                const blocks = document.querySelectorAll('[class*="block"], [data-block], [class*="component"]');
                                console.log('ğŸ§© Blocos encontrados:', blocks.length);
                                
                                if (blocks.length > 0) {
                                    console.log('ğŸ–±ï¸ Clicando no primeiro bloco...');
                                    blocks[0].click();
                                    
                                    setTimeout(() => {
                                        const hasHotReloadAfter = document.body.textContent.includes('ğŸ”¥ TESTE HOT RELOAD');
                                        console.log('ğŸ”¥ ApÃ³s clique - HOT RELOAD:', hasHotReloadAfter);
                                        
                                        if (hasHotReloadAfter) {
                                            console.log('ğŸ‰ SUCESSO! As alteraÃ§Ãµes estÃ£o funcionando!');
                                        } else {
                                            console.log('âŒ As alteraÃ§Ãµes ainda nÃ£o aparecem');
                                        }
                                    }, 1000);
                                }
                            }, 2000);
                        `;
                        editorWindow.document.head.appendChild(script);
                        log('ğŸ’‰ Script injetado no editor', 'success');
                    } catch (e) {
                        log('âŒ Erro ao injetar script: ' + e.message, 'error');
                    }
                } else {
                    log('âŒ NÃ£o foi possÃ­vel abrir o editor', 'error');
                }
            }, 2000);
        }

        function forcarRefresh() {
            log('ğŸ”„ ForÃ§ando refresh...', 'info');
            const editorWindow = window.open('http://localhost:5173/editor', '_blank');
            setTimeout(() => {
                if (editorWindow) {
                    editorWindow.location.reload(true);
                    log('âœ… Refresh forÃ§ado no editor', 'success');
                }
            }, 1000);
        }

        function limparCache() {
            log('ğŸ—‘ï¸ Limpando cache...', 'info');

            // Limpar localStorage
            const lsKeys = Object.keys(localStorage);
            lsKeys.forEach(key => {
                if (key.includes('funnel') || key.includes('quiz') || key.includes('editor')) {
                    localStorage.removeItem(key);
                }
            });

            // Limpar sessionStorage
            sessionStorage.clear();

            log(`âœ… Cache limpo (${lsKeys.length} chaves localStorage removidas)`, 'success');
        }

        function injetarScript() {
            log('ğŸ’‰ Carregando script de teste...', 'info');

            fetch('/teste-alteracoes-urgente.js')
                .then(response => response.text())
                .then(scriptContent => {
                    const script = document.createElement('script');
                    script.textContent = scriptContent;
                    document.head.appendChild(script);
                    log('âœ… Script de teste carregado', 'success');
                })
                .catch(error => {
                    log('âŒ Erro ao carregar script: ' + error.message, 'error');
                });
        }

        // Auto-teste inicial
        log('ğŸš€ Sistema de teste carregado', 'success');
        log('ğŸ’¡ Clique em "Testar AlteraÃ§Ãµes" para verificar', 'info');
    </script>
</body>

</html>