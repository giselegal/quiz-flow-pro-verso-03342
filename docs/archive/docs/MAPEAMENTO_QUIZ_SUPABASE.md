# Mapeamento Detalhado do Sistema de Quiz

## 1. Etapas do Quiz - Fluxo Completo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                FLUXO COMPLETO DAS ETAPAS DO QUIZ                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ETAPA 1: IntroduÃ§Ã£o    â”‚      â”‚ StepsContext   â”‚      â”‚ Armazenamento no Supabase     â”‚
â”‚                               â”‚      â”‚                â”‚      â”‚                               â”‚
â”‚ â€¢ ApresentaÃ§Ã£o inicial        â”‚      â”‚ â€¢ 21 etapas    â”‚      â”‚ â€¢ Tabela: quiz_users          â”‚
â”‚ â€¢ ExplicaÃ§Ã£o do funcionamento â”‚      â”‚ â€¢ Estado atual â”‚      â”‚   - Dados do usuÃ¡rio          â”‚
â”‚ â€¢ Chamada para aÃ§Ã£o           â”‚â—„â”€â”€â”€â”€â–ºâ”‚ â€¢ NavegaÃ§Ã£o    â”‚â—„â”€â”€â”€â”€â–ºâ”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ETAPA 2: Coleta de Nome   â”‚      â”‚ QuizContext    â”‚      â”‚ Armazenamento no Supabase     â”‚
â”‚                               â”‚      â”‚                â”‚      â”‚                               â”‚
â”‚ â€¢ FormulÃ¡rio de nome/email    â”‚      â”‚ â€¢ Respostas    â”‚      â”‚ â€¢ Tabela: quiz_sessions       â”‚
â”‚ â€¢ Dados do participante       â”‚â—„â”€â”€â”€â”€â–ºâ”‚ â€¢ Estado quiz  â”‚â—„â”€â”€â”€â”€â–ºâ”‚   - SessÃ£o iniciada           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ETAPAS 3-12: 10 Perguntas   â”‚      â”‚ LÃ³gica de Quiz â”‚      â”‚ Armazenamento no Supabase     â”‚
â”‚                               â”‚      â”‚                â”‚      â”‚                               â”‚
â”‚ â€¢ Q1: Tipo de Roupa           â”‚      â”‚ â€¢ answerQuestionâ”‚      â”‚ â€¢ Tabela: quiz_step_responses â”‚
â”‚ â€¢ Q2: Personalidade           â”‚      â”‚ â€¢ calculateStyleâ”‚      â”‚   - Cada resposta individual  â”‚
â”‚ â€¢ Q3: Visual                  â”‚â—„â”€â”€â”€â”€â–ºâ”‚ â€¢ updateScore  â”‚â—„â”€â”€â”€â”€â–ºâ”‚   - PontuaÃ§Ã£o por estilo      â”‚
â”‚ â€¢ Q4: Detalhes                â”‚      â”‚ â€¢ trackProgressâ”‚      â”‚                               â”‚
â”‚ â€¢ Q5: Estampas                â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ Q6: Casacos                 â”‚             â”‚
â”‚ â€¢ Q7: CalÃ§as                  â”‚             â”‚
â”‚ â€¢ Q8: Sapatos                 â”‚             â”‚
â”‚ â€¢ Q9: AcessÃ³rios              â”‚             â”‚
â”‚ â€¢ Q10: Tecidos                â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ETAPA 13: TransiÃ§Ã£o        â”‚      â”‚ Processamento  â”‚      â”‚ Armazenamento no Supabase     â”‚
â”‚                               â”‚      â”‚ IntermediÃ¡rio  â”‚      â”‚                               â”‚
â”‚ â€¢ Mensagem de progresso       â”‚â—„â”€â”€â”€â”€â–ºâ”‚ â€¢ calcularPontosâ”‚â—„â”€â”€â”€â”€â–ºâ”‚ â€¢ AtualizaÃ§Ã£o: quiz_sessions  â”‚
â”‚ â€¢ PreparaÃ§Ã£o para anÃ¡lise     â”‚      â”‚ â€¢ prepararDadosâ”‚      â”‚   - Progresso intermediÃ¡rio   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ETAPAS 14-19: EstratÃ©gicas   â”‚      â”‚ LÃ³gica AvanÃ§adaâ”‚      â”‚ Armazenamento no Supabase     â”‚
â”‚                               â”‚      â”‚                â”‚      â”‚                               â”‚
â”‚ â€¢ S1: Dificuldades            â”‚      â”‚ â€¢ refinarEstiloâ”‚      â”‚ â€¢ Tabela: quiz_step_responses â”‚
â”‚ â€¢ S2: Problemas               â”‚      â”‚ â€¢ avaliarNeces-â”‚      â”‚   - Respostas estratÃ©gicas    â”‚
â”‚ â€¢ S3: FrequÃªncia              â”‚â—„â”€â”€â”€â”€â–ºâ”‚   sidades      â”‚â—„â”€â”€â”€â”€â–ºâ”‚   - Dados para recomendaÃ§Ãµes  â”‚
â”‚ â€¢ S4: Guia de Estilo          â”‚      â”‚ â€¢ prepararOfer-â”‚      â”‚                               â”‚
â”‚ â€¢ S5: Investimento            â”‚      â”‚   ta           â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ S6: Ajuda Imediata          â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ETAPA 20: Resultado       â”‚      â”‚  CÃ¡lculo Final â”‚      â”‚ Armazenamento no Supabase     â”‚
â”‚                               â”‚      â”‚                â”‚      â”‚                               â”‚
â”‚ â€¢ Estilo predominante         â”‚      â”‚ â€¢ calculateQuizâ”‚      â”‚ â€¢ Tabela: quiz_results        â”‚
â”‚ â€¢ Estilos secundÃ¡rios         â”‚â—„â”€â”€â”€â”€â–ºâ”‚   Result()     â”‚â—„â”€â”€â”€â”€â–ºâ”‚   - Estilo predominante       â”‚
â”‚ â€¢ Porcentagens e pontuaÃ§Ãµes   â”‚      â”‚ â€¢ styleScores  â”‚      â”‚   - Estilos secundÃ¡rios       â”‚
â”‚ â€¢ RecomendaÃ§Ãµes personalizadasâ”‚      â”‚ â€¢ createResult â”‚      â”‚   - PontuaÃ§Ãµes completas      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ETAPA 21: Oferta         â”‚      â”‚ ConversÃ£o      â”‚      â”‚ Armazenamento no Supabase     â”‚
â”‚                               â”‚      â”‚                â”‚      â”‚                               â”‚
â”‚ â€¢ ApresentaÃ§Ã£o da oferta      â”‚      â”‚ â€¢ submitResultsâ”‚      â”‚ â€¢ Tabela: quiz_conversions    â”‚
â”‚ â€¢ OpÃ§Ãµes de compra            â”‚â—„â”€â”€â”€â”€â–ºâ”‚ â€¢ trackConver- â”‚â—„â”€â”€â”€â”€â–ºâ”‚   - Dados da conversÃ£o        â”‚
â”‚ â€¢ Call-to-action              â”‚      â”‚   sion         â”‚      â”‚   - Valor, produto, etc.      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. LÃ³gica de CÃ¡lculo de Resultados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 PROCESSO DE CÃLCULO DE RESULTADOS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Coleta de Respostas     â”‚      â”‚ quizEngine.ts  â”‚      â”‚        Supabase               â”‚
â”‚                               â”‚      â”‚                â”‚      â”‚                               â”‚
â”‚ â€¢ Cada pergunta permite       â”‚      â”‚ â€¢ FunÃ§Ã£o:      â”‚      â”‚ â€¢ Tabela:                     â”‚
â”‚   seleÃ§Ã£o de mÃºltiplas opÃ§Ãµes â”‚â”€â”€â”€â”€â”€â–ºâ”‚   calculate-   â”‚â”€â”€â”€â”€â”€â–ºâ”‚   quiz_step_responses         â”‚
â”‚   (multiSelect: 3)            â”‚      â”‚   QuizResult() â”‚      â”‚                               â”‚
â”‚                               â”‚      â”‚                â”‚      â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚  PontuaÃ§Ã£o por â”‚
                                      â”‚     Estilo     â”‚
                                      â”‚                â”‚
                                      â”‚ â€¢ Cada opÃ§Ã£o temâ”‚
                                      â”‚   um estilo e  â”‚
                                      â”‚   peso associadoâ”‚
                                      â”‚                â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     CÃ¡lculo de PontuaÃ§Ãµes     â”‚      â”‚  AgregaÃ§Ã£o de  â”‚      â”‚      NormalizaÃ§Ã£o             â”‚
â”‚                               â”‚      â”‚   PontuaÃ§Ãµes   â”‚      â”‚                               â”‚
â”‚ â€¢ styleScores[option.style]   â”‚      â”‚                â”‚      â”‚ â€¢ CÃ¡lculo de percentuais      â”‚
â”‚   = (styleScores[option.style]â”‚â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Soma dos     â”‚â”€â”€â”€â”€â”€â–ºâ”‚   percentage = (pontuaÃ§Ã£o /   â”‚
â”‚      || 0) + (option.weight   â”‚      â”‚   pontos por   â”‚      â”‚      pontuaÃ§Ã£oTotal) * 100    â”‚
â”‚      || 1);                   â”‚      â”‚   estilo       â”‚      â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚   OrdenaÃ§Ã£o    â”‚
                                      â”‚                â”‚
                                      â”‚ â€¢ Estilos sÃ£o  â”‚
                                      â”‚   ordenados porâ”‚
                                      â”‚   pontuaÃ§Ã£o    â”‚
                                      â”‚                â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Resultados PrimÃ¡rios      â”‚      â”‚   Resultados   â”‚      â”‚      Armazenamento            â”‚
â”‚                               â”‚      â”‚  SecundÃ¡rios   â”‚      â”‚                               â”‚
â”‚ â€¢ primaryStyle: o estilo com  â”‚      â”‚                â”‚      â”‚ â€¢ Objeto QuizResult salvo     â”‚
â”‚   maior pontuaÃ§Ã£o             â”‚      â”‚ â€¢ secondaryStyleâ”‚â”€â”€â”€â”€â”€â–ºâ”‚   em quiz_results no         â”‚
â”‚ â€¢ Dados completos do estilo   â”‚â—„â”€â”€â”€â”€â–ºâ”‚   os prÃ³ximos  â”‚      â”‚   Supabase                    â”‚
â”‚   predominante                â”‚      â”‚   3 estilos    â”‚      â”‚                               â”‚
â”‚                               â”‚      â”‚   por pontuaÃ§Ã£oâ”‚      â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. Sincronia com Supabase - Fluxo de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FLUXO DE DADOS PARA O SUPABASE                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚  InicializaÃ§Ã£o   â”‚
                                      â”‚     do Quiz      â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   quizSupabaseService.ts     â”‚     â”‚  FunÃ§Ãµes de      â”‚     â”‚   Tabela: quiz_users           â”‚
â”‚                              â”‚     â”‚   ServiÃ§o        â”‚     â”‚                                â”‚
â”‚ â€¢ createQuizUser()           â”‚     â”‚                  â”‚     â”‚ â€¢ id                           â”‚
â”‚   - Cria registro do usuÃ¡rio â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ Chamadas       â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ email                        â”‚
â”‚   - Associa sessionId        â”‚     â”‚   assÃ­ncronas    â”‚     â”‚ â€¢ name                         â”‚
â”‚                              â”‚     â”‚   ao Supabase    â”‚     â”‚ â€¢ session_id                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   quizSupabaseService.ts     â”‚     â”‚  FunÃ§Ãµes de      â”‚     â”‚   Tabela: quiz_sessions        â”‚
â”‚                              â”‚     â”‚   ServiÃ§o        â”‚     â”‚                                â”‚
â”‚ â€¢ createQuizSession()        â”‚     â”‚                  â”‚     â”‚ â€¢ id                           â”‚
â”‚   - Cria sessÃ£o de quiz      â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ Chamadas       â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ quiz_user_id                 â”‚
â”‚   - Define etapas totais     â”‚     â”‚   assÃ­ncronas    â”‚     â”‚ â€¢ status                       â”‚
â”‚   - Inicializa pontuaÃ§Ã£o     â”‚     â”‚   ao Supabase    â”‚     â”‚ â€¢ current_step                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â”‚ (Para cada resposta de pergunta)
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   quizSupabaseService.ts     â”‚     â”‚  FunÃ§Ãµes de      â”‚     â”‚ Tabela: quiz_step_responses    â”‚
â”‚                              â”‚     â”‚   ServiÃ§o        â”‚     â”‚                                â”‚
â”‚ â€¢ saveQuizResponse()         â”‚     â”‚                  â”‚     â”‚ â€¢ id                           â”‚
â”‚   - Salva resposta individualâ”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ Chamadas       â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ session_id                   â”‚
â”‚   - Registra pontuaÃ§Ã£o       â”‚     â”‚   assÃ­ncronas    â”‚     â”‚ â€¢ question_id                  â”‚
â”‚   - Associa Ã  sessÃ£o         â”‚     â”‚   ao Supabase    â”‚     â”‚ â€¢ answer_value                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   quizSupabaseService.ts     â”‚     â”‚  FunÃ§Ãµes de      â”‚     â”‚   Tabela: quiz_sessions        â”‚
â”‚                              â”‚     â”‚   ServiÃ§o        â”‚     â”‚                                â”‚
â”‚ â€¢ updateQuizSession()        â”‚     â”‚                  â”‚     â”‚ â€¢ AtualizaÃ§Ã£o de:              â”‚
â”‚   - Atualiza progresso       â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ Chamadas       â”‚â”€â”€â”€â”€â–ºâ”‚   - current_step               â”‚
â”‚   - Atualiza pontuaÃ§Ã£o       â”‚     â”‚   assÃ­ncronas    â”‚     â”‚   - score                      â”‚
â”‚   - Define status            â”‚     â”‚   ao Supabase    â”‚     â”‚   - status                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚    CÃ¡lculo de    â”‚
                                      â”‚    Resultados    â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   quizSupabaseService.ts     â”‚     â”‚  FunÃ§Ãµes de      â”‚     â”‚   Tabela: quiz_results         â”‚
â”‚                              â”‚     â”‚   ServiÃ§o        â”‚     â”‚                                â”‚
â”‚ â€¢ saveQuizResult()           â”‚     â”‚                  â”‚     â”‚ â€¢ id                           â”‚
â”‚   - Salva resultado final    â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ Chamadas       â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ session_id                   â”‚
â”‚   - Estilos e pontuaÃ§Ãµes     â”‚     â”‚   assÃ­ncronas    â”‚     â”‚ â€¢ result_type                  â”‚
â”‚   - RecomendaÃ§Ãµes            â”‚     â”‚   ao Supabase    â”‚     â”‚ â€¢ result_data                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   quizSupabaseService.ts     â”‚     â”‚  FunÃ§Ãµes de      â”‚     â”‚  Tabela: quiz_conversions      â”‚
â”‚                              â”‚     â”‚   ServiÃ§o        â”‚     â”‚                                â”‚
â”‚ â€¢ recordConversion()         â”‚     â”‚                  â”‚     â”‚ â€¢ id                           â”‚
â”‚   - Registra conversÃ£o       â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ Chamadas       â”‚â”€â”€â”€â”€â–ºâ”‚ â€¢ session_id                   â”‚
â”‚   - Valor, produto           â”‚     â”‚   assÃ­ncronas    â”‚     â”‚ â€¢ conversion_type              â”‚
â”‚   - Dados de afiliado        â”‚     â”‚   ao Supabase    â”‚     â”‚ â€¢ conversion_value             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4. Componentes que Podem Gerar ConfusÃ£o

### 4.1. MÃºltiplos Componentes Quiz com FunÃ§Ãµes Similares

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  COMPONENTES SIMILARES QUE PODEM CAUSAR CONFUSÃƒO                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QuizContent.tsx             â”‚  â”‚ QuizContentWithTracking.tsx â”‚  â”‚ CaktoQuizFlow.tsx           â”‚
â”‚                             â”‚  â”‚                             â”‚  â”‚                             â”‚
â”‚ â€¢ RenderizaÃ§Ã£o bÃ¡sica do    â”‚  â”‚ â€¢ Similar ao QuizContent    â”‚  â”‚ â€¢ Fluxo completo de quiz    â”‚
â”‚   conteÃºdo do quiz          â”‚  â”‚ â€¢ Adiciona tracking         â”‚  â”‚ â€¢ Possui estados prÃ³prios   â”‚
â”‚ â€¢ NÃ£o gerencia estado       â”‚  â”‚ â€¢ Pode usar useQuizHooks    â”‚  â”‚ â€¢ Renderiza todo o quiz     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QuizOption.tsx              â”‚  â”‚ QuizOptionImage.tsx         â”‚  â”‚ QuestionComponent.tsx       â”‚
â”‚                             â”‚  â”‚                             â”‚  â”‚                             â”‚
â”‚ â€¢ OpÃ§Ã£o de resposta texto   â”‚  â”‚ â€¢ OpÃ§Ã£o com imagem          â”‚  â”‚ â€¢ Renderiza uma pergunta    â”‚
â”‚ â€¢ Componente bÃ¡sico         â”‚  â”‚ â€¢ Similar mas com imagem    â”‚  â”‚ â€¢ ContÃ©m opÃ§Ãµes de resposta â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2. ConfusÃ£o nos Contextos e Hooks

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CONTEXTOS E HOOKS COM SOBREPOSIÃ‡ÃƒO                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useQuizLogic.ts             â”‚  â”‚ useQuizHooks.ts             â”‚  â”‚ QuizContext.tsx             â”‚
â”‚                             â”‚  â”‚                             â”‚  â”‚                             â”‚
â”‚ â€¢ Gerencia estado do quiz   â”‚  â”‚ â€¢ Similar ao useQuizLogic   â”‚  â”‚ â€¢ Contexto global de quiz   â”‚
â”‚ â€¢ FunÃ§Ãµes de navegaÃ§Ã£o      â”‚  â”‚ â€¢ ImplementaÃ§Ã£o simplificadaâ”‚  â”‚ â€¢ Incorpora useQuizLogic    â”‚
â”‚ â€¢ CÃ¡lculo de resultados     â”‚  â”‚ â€¢ Pode causar confusÃ£o      â”‚  â”‚ â€¢ FunÃ§Ãµes de alto nÃ­vel     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StepsContext.tsx            â”‚  â”‚ EditorContext.tsx           â”‚
â”‚                             â”‚  â”‚                             â”‚
â”‚ â€¢ Gerencia etapas do quiz   â”‚  â”‚ â€¢ Gerencia etapas no editor â”‚
â”‚ â€¢ Usado na execuÃ§Ã£o do quiz â”‚  â”‚ â€¢ Usado na ediÃ§Ã£o/criaÃ§Ã£o   â”‚
â”‚ â€¢ Pode confundir com Editor â”‚  â”‚ â€¢ Semelhante ao StepsContextâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3. ServiÃ§os Redundantes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SERVIÃ‡OS COM FUNCIONALIDADES SOBREPOSTAS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ quizService.ts              â”‚  â”‚ quizSupabaseService.ts      â”‚  â”‚ quizDataService.ts          â”‚
â”‚                             â”‚  â”‚                             â”‚  â”‚                             â”‚
â”‚ â€¢ FunÃ§Ãµes legadas de quiz   â”‚  â”‚ â€¢ ServiÃ§o principal Supabaseâ”‚  â”‚ â€¢ FunÃ§Ãµes de dados do quiz  â”‚
â”‚ â€¢ VersÃ£o simplificada       â”‚  â”‚ â€¢ Completo e atualizado     â”‚  â”‚ â€¢ Pode sobrepor ao Supabase â”‚
â”‚ â€¢ NÃ£o usa Supabase          â”‚  â”‚ â€¢ ImplementaÃ§Ã£o preferida   â”‚  â”‚ â€¢ FunÃ§Ãµes potencialmente    â”‚
â”‚                             â”‚  â”‚                             â”‚  â”‚   redundantes               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4. ImplementaÃ§Ãµes Duplicadas de Editores

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MÃšLTIPLAS VERSÃ•ES DE EDITORES                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ editor.tsx                  â”‚  â”‚ editor-fixed.tsx            â”‚  â”‚ editor-fixed-dragdrop.tsx   â”‚
â”‚                             â”‚  â”‚                             â”‚  â”‚                             â”‚
â”‚ â€¢ VersÃ£o original           â”‚  â”‚ â€¢ VersÃ£o corrigida          â”‚  â”‚ â€¢ ImplementaÃ§Ã£o atual       â”‚
â”‚ â€¢ Descontinuada             â”‚  â”‚ â€¢ Redireciona para          â”‚  â”‚ â€¢ Com drag & drop           â”‚
â”‚ â€¢ NÃ£o deve ser usada        â”‚  â”‚   editor-fixed-dragdrop     â”‚  â”‚ â€¢ VersÃ£o mais completa      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5. Estado Atual da IntegraÃ§Ã£o com Supabase

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SITUAÃ‡ÃƒO DA INTEGRAÃ‡ÃƒO COM SUPABASE                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IMPLEMENTADO                â”‚  â”‚ PENDENTE                    â”‚  â”‚ STATUS                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Estrutura de tabelas     â”‚  â”‚ âŒ ConexÃ£o UI-Supabase      â”‚  â”‚ ğŸ”„ Sistema completo e pronto â”‚
â”‚ âœ… Tipos TypeScript         â”‚  â”‚ âŒ Hook useQuizData         â”‚  â”‚    mas nÃ£o conectado na UI   â”‚
â”‚ âœ… Service de acesso        â”‚  â”‚ âŒ ImplementaÃ§Ã£o na UI      â”‚  â”‚ ğŸ”„ Necessita conectar UI aos â”‚
â”‚ âœ… FunÃ§Ãµes CRUD completas   â”‚  â”‚ âŒ Testes e validaÃ§Ã£o       â”‚  â”‚    serviÃ§os jÃ¡ implementados â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 6. RecomendaÃ§Ãµes para UnificaÃ§Ã£o

Para simplificar o sistema e garantir a integraÃ§Ã£o completa com o Supabase, recomenda-se:

1. Substituir as chamadas de mock nos componentes de UI por chamadas reais ao `quizSupabaseService`
2. Atualizar o `QuizContext` para usar o `quizSupabaseService` em vez do armazenamento local
3. Consolidar os hooks redundantes, mantendo apenas o `useQuizLogic` com implementaÃ§Ã£o completa
4. Depreciar os serviÃ§os redundantes, mantendo apenas o `quizSupabaseService` como fonte principal
5. Adicionar documentaÃ§Ã£o clara para cada componente, indicando seu propÃ³sito e relaÃ§Ãµes
6. Padronizar nomes de componentes para evitar confusÃ£o (ex: prefixo "Cakto" ou "Enhanced")
