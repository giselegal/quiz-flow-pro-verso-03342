#!/bin/bash
# Script para testar auto-advance nas etapas 2-11

echo "ğŸ” Testando AUTO-ADVANCE nas etapas 2-11..."
echo ""

# Verificar se o servidor estÃ¡ rodando
if ! curl -s http://localhost:8080 > /dev/null; then
    echo "âŒ Servidor nÃ£o estÃ¡ rodando em localhost:8080"
    echo "Execute: npm run dev"
    exit 1
fi

echo "âœ… Servidor rodando"
echo ""

# Abrir o editor no navegador
echo "ğŸ“± Abrindo editor no navegador..."
"$BROWSER" "http://localhost:8080/editor?template=quiz21StepsComplete" &

echo ""
echo "ğŸ§ª InstruÃ§Ãµes de teste - AUTO-ADVANCE (Steps 2-11):"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ“‹ O que Ã© o AUTO-ADVANCE?"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "Quando vocÃª seleciona o nÃºmero mÃ­nimo de opÃ§Ãµes requeridas,"
echo "o quiz deve avanÃ§ar automaticamente apÃ³s 1.5 segundos."
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ¯ COMO TESTAR:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "1ï¸âƒ£  Entre no modo PREVIEW:"
echo "   â€¢ Abra o Console do navegador (F12)"
echo "   â€¢ Digite: window.__editorMode.setViewMode('preview')"
echo "   â€¢ Pressione Enter"
echo ""
echo "2ï¸âƒ£  Navegue atÃ© a ETAPA 2:"
echo "   â€¢ TÃ­tulo: 'Pergunta 1 de 10'"
echo "   â€¢ SubtÃ­tulo: 'QUAL O SEU TIPO DE ROUPA FAVORITA?'"
echo "   â€¢ 8 opÃ§Ãµes com imagens"
echo "   â€¢ Requer: 3 seleÃ§Ãµes"
echo ""
echo "3ï¸âƒ£  TESTE o auto-advance:"
echo "   a) Selecione 1 opÃ§Ã£o â†’ BotÃ£o 'AvanÃ§ar' continua DESABILITADO"
echo "   b) Selecione 2Âª opÃ§Ã£o â†’ BotÃ£o continua DESABILITADO"
echo "   c) Selecione 3Âª opÃ§Ã£o â†’ BotÃ£o fica HABILITADO (dourado)"
echo "   d) AGUARDE 1.5 segundos â†’ Deve AVANÃ‡AR automaticamente"
echo ""
echo "4ï¸âƒ£  REPITA para etapas 3-11:"
echo "   â€¢ Etapa 3: 'Pergunta 2 de 10' (3 de 8 opÃ§Ãµes)"
echo "   â€¢ Etapa 4: 'Pergunta 3 de 10' (3 de 8 opÃ§Ãµes)"
echo "   â€¢ Etapa 5: 'Pergunta 4 de 10' (3 de 8 opÃ§Ãµes)"
echo "   â€¢ Etapa 6: 'Pergunta 5 de 10' (3 de 8 opÃ§Ãµes)"
echo "   â€¢ Etapa 7: 'Pergunta 6 de 10' (3 de 8 opÃ§Ãµes)"
echo "   â€¢ Etapa 8: 'Pergunta 7 de 10' (3 de 8 opÃ§Ãµes)"
echo "   â€¢ Etapa 9: 'Pergunta 8 de 10' (3 de 8 opÃ§Ãµes)"
echo "   â€¢ Etapa 10: 'Pergunta 9 de 10' (3 de 8 opÃ§Ãµes)"
echo "   â€¢ Etapa 11: 'Pergunta 10 de 10' (3 de 8 opÃ§Ãµes)"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "âœ… COMPORTAMENTO ESPERADO:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "â€¢ Antes de 3 seleÃ§Ãµes: BotÃ£o DESABILITADO (cinza)"
echo "â€¢ ApÃ³s 3 seleÃ§Ãµes: BotÃ£o HABILITADO (dourado)"
echo "â€¢ ApÃ³s 1.5s: AvanÃ§a AUTOMATICAMENTE para prÃ³xima etapa"
echo "â€¢ UsuÃ¡rio pode clicar no botÃ£o ANTES dos 1.5s (manual)"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "âŒ COMPORTAMENTO INCORRETO:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "â€¢ AvanÃ§a antes de 3 seleÃ§Ãµes"
echo "â€¢ NÃ£o avanÃ§a automaticamente apÃ³s 1.5s"
echo "â€¢ BotÃ£o nÃ£o fica habilitado com 3 seleÃ§Ãµes"
echo "â€¢ Timer nÃ£o Ã© cancelado ao clicar manualmente"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ” DEBUG:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "Se o auto-advance nÃ£o funcionar, verifique no console:"
echo "â€¢ Errors relacionados a 'contextData'"
echo "â€¢ Warnings sobre 'goToNext' ou 'onNext'"
echo "â€¢ Network errors (imagens nÃ£o carregando)"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ“Š CONFIGURAÃ‡ÃƒO TÃ‰CNICA:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "â€¢ autoAdvance: true"
echo "â€¢ autoAdvanceDelay: 1500 (ms)"
echo "â€¢ minSelections: 3"
echo "â€¢ maxSelections: 3"
echo "â€¢ multipleSelection: true"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
